(window.webpackJsonp=window.webpackJsonp||[]).push([[81],{478:function(e,t){function n(e,t,n){var r,l,c,o,d;function f(){var h=Date.now()-o;h<t&&h>=0?r=setTimeout(f,t-h):(r=null,n||(d=e.apply(c,l),c=l=null))}null==t&&(t=100);var h=function(){c=this,l=arguments,o=Date.now();var h=n&&!r;return r||(r=setTimeout(f,t)),h&&(d=e.apply(c,l),c=l=null),d};return h.clear=function(){r&&(clearTimeout(r),r=null)},h.flush=function(){r&&(d=e.apply(c,l),c=l=null,clearTimeout(r),r=null)},h}n.debounce=n,e.exports=n},725:function(e,t,n){"use strict";n.r(t);n(18),n(21),n(23),n(24),n(16),n(7),n(13);var r=n(1),l=n(4),c=(n(22),n(199),n(126),n(67)),o=n(49),d=n(159),f=n(10),h=n(478);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var v={name:"SearchMultiSelect",components:{Dropdown:d.default,Spinner:o.default},data:function(){return{searched:"",result:null,open:!1,loading:!1,deleteWarning:!1,selectedList:[]}},props:{currentId:{type:String,default:"title"},titleKey:{type:String,default:"title"},placeholder:{type:String,default:""},listApi:{type:String,default:""},selected:{type:Array,default:function(){return[]}}},directives:{outsideClick:c.a},computed:{},watch:{selected:function(e){this.selectedList=e}},methods:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(l.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({deleteTag:function(e){var t=this.selectedList.findIndex((function(i){return i.id===e.id}));this.selectedList.splice(t,1),this.emittingIds()},deleteKeyPress:function(){this.searched||(this.deleteWarning&&this.deleteTag(this.selectedList[this.selectedList.length-1]),this.deleteWarning=!this.deleteWarning)},clearData:function(){this.open=!1},itemClicked:function(e){this.open=!1;var t=this.selectedList.findIndex((function(i){return i.id===e.id}));t>-1?this.selectedList.splice(t,1):this.selectedList.push(e),this.searched="",this.emittingIds()},emittingIds:function(){this.$emit("selected",this.selectedList)},searchData:Object(h.debounce)((function(e){this.fetchingData(!0)}),700),outsideClickFn:function(){this.open=!1},onFocus:function(){this.fetchingData()},fetchingData:function(){var e=arguments,t=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var r,l,c;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(l=e.length>0&&void 0!==e[0]&&e[0],t.open=!0,null!==(r=t.result)&&void 0!==r&&r.length&&!l){n.next=15;break}return n.prev=3,t.loading=!0,n.next=7,t.getRequest({params:{q:t.searched,per_page:10},api:t.listApi});case 7:c=n.sent,t.result=(null==c?void 0:c.data)||[],t.loading=!1,n.next=15;break;case 12:return n.prev=12,n.t0=n.catch(3),n.abrupt("return",t.$nuxt.error(n.t0));case 15:case"end":return n.stop()}}),n,null,[[3,12]])})))()}},Object(f.b)("common",["getRequest"])),mounted:function(){this.selectedList=this.selected}},y=v,w=n(15),component=Object(w.a)(y,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"custom-dropdown"},[t("ul",{staticClass:"multi-select"},[e._l(e.selectedList,(function(n,r){return t("li",{key:r,class:{warning:e.deleteWarning&&r===e.selectedList.length-1}},[t("span",{staticClass:"mx-w-150x ellipsis",attrs:{title:n[e.titleKey]}},[e._v(e._s(n[e.titleKey]))]),e._v(" "),t("span",{staticClass:"close-btn",on:{click:function(t){return e.deleteTag(n)}}},[t("i",{staticClass:"icon close-icon"})])])})),e._v(" "),t("li",{staticClass:"input-item"},[t("input",{directives:[{name:"model",rawName:"v-model",value:e.searched,expression:"searched"}],ref:"searchInput",attrs:{type:"text",placeholder:e.placeholder,"data-ignore":e.currentId},domProps:{value:e.searched},on:{input:[function(t){t.target.composing||(e.searched=t.target.value)},e.searchData],focus:e.onFocus,keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"delete",[8,46],t.key,["Backspace","Delete","Del"])?null:e.deleteKeyPress()}}})])],2),e._v(" "),e.open?t("div",{directives:[{name:"outside-click",rawName:"v-outside-click",value:e.outsideClickFn,expression:"outsideClickFn"}],staticClass:"dropdown-inner mn-h-200x",attrs:{id:e.currentId}},[e.loading?t("div",{staticClass:"spinner-wrapper"},[t("spinner",{staticClass:"mr-15",attrs:{radius:60,color:"primary"}})],1):e._e(),e._v(" "),t("ul",e._l(e.result,(function(data,n){return t("li",{key:n,staticClass:"mx-w-350x ellipsis text-nowrap",attrs:{title:data[e.titleKey]},on:{click:function(t){return t.preventDefault(),e.itemClicked(data)}}},[e._v("\n        "+e._s(data[e.titleKey])+"\n      ")])})),0)]):e._e()])}),[],!1,null,null,null);t.default=component.exports;installComponents(component,{Spinner:n(49).default})}}]);